{"version":3,"sources":["Net.tsx","App.tsx","index.tsx"],"names":["Net","width","qty","linesA","linesB","i","push","strokeWidth","stroke","points","App","React","useState","name","color","paths","setPaths","curPath","setCurPath","formX","setFormX","formY","setFormY","code","setCode","addPoint","x","y","Number","isNaN","cpaths","useEffect","map","path","coordsArray","undefined","endPoint","point","join","style","position","right","zIndex","value","onChange","e","parseFloat","target","type","onClick","setEndpoint","slice","length","delPoint","margin","height","scale","evt","layerX","layerY","star","id","toString","radius","fill","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c246aa36.chunk.js","sourcesContent":["import React from 'react';\nimport { Layer, Line } from 'react-konva';\n\n// eslint-disable-next-line react/prop-types\nconst Net: React.FC<{ width: number; qty: number }> = ({ width, qty }) => {\n  const linesA = [];\n  const linesB = [];\n\n  // eslint-disable-next-line no-plusplus\n  for (let i = 0; i < qty / width; i++) {\n    linesA.push(\n      <Line\n        strokeWidth={0.01}\n        stroke=\"black\"\n        points={[i * width, 0, i * width, qty]}\n      />,\n    );\n\n    linesB.push(\n      <Line\n        strokeWidth={0.01}\n        stroke=\"black\"\n        points={[0, i * width, qty, i * width]}\n      />,\n    );\n  }\n\n  return (\n    <Layer>\n      {linesA}\n      {linesB}\n    </Layer>\n  );\n};\n\nexport default Net;\n","import React, { useEffect } from 'react';\nimport {\n  Stage, Layer, Line, Circle,\n} from 'react-konva';\nimport Konva from 'konva';\nimport Net from './Net';\n\nexport interface Point {\n  x: number,\n  y: number,\n}\n\nexport interface Path {\n  name: string,\n  color: string,\n  points: Point[],\n  endPoint?: Point\n}\n\nconst App = () => {\n  const [paths, setPaths] = React.useState<Path[]>([\n    { name: 'Дрон 1', color: '#000', points: [] },\n    { name: 'Дрон 2', color: '#F00', points: [] },\n    { name: 'Дрон 3', color: '#00F', points: [] },\n  ]);\n  const [curPath, setCurPath] = React.useState(0);\n  const [formX, setFormX] = React.useState('');\n  const [formY, setFormY] = React.useState('');\n  const [code, setCode] = React.useState('');\n\n  const addPoint = (x: number, y: number) => {\n    if (!Number.isNaN(x) && !Number.isNaN(y)) {\n      const cpaths = [...paths];\n      cpaths[curPath] = { ...cpaths[curPath], points: [...cpaths[curPath].points, { x, y }] };\n\n      setPaths(cpaths);\n    }\n  };\n\n  const setEndpoint = (x: number, y: number) => {\n    if (!Number.isNaN(x) && !Number.isNaN(y)) {\n      const cpaths = [...paths];\n      cpaths[curPath] = { ...cpaths[curPath], endPoint: { x, y } };\n\n      setPaths(cpaths);\n    }\n  };\n\n  const addPointEvent = (e: Konva.KonvaEventObject<MouseEvent>) => {\n    // @ts-ignore\n    addPoint(e.evt.layerX / 100, e.evt.layerY / 100);\n  };\n\n  useEffect(() => {\n    // eslint-disable-next-line array-callback-return\n    setCode(paths.map((path) => {\n      // eslint-disable-next-line max-len\n      const coordsArray = (path.endPoint !== undefined ? [...path.points, path.endPoint] : path.points)\n        .map((point) => (\n          `{${point.x}, ${point.y}, 2.0},`\n        )).join('\\n');\n\n      return `code\n${coordsArray}\ncodeend`;\n    }).join('\\n\\n\\n\\n'));\n  }, [paths]);\n\n  const delPoint = () => {\n    const cpaths = [...paths];\n    cpaths[curPath] = {\n      ...cpaths[curPath],\n      points: [...cpaths[curPath].points.slice(0, cpaths[curPath].points.length - 1)],\n    };\n\n    setPaths(cpaths);\n  };\n\n  return (\n    <>\n      <div style={{ position: 'absolute', right: 0, zIndex: 10000000 }}>\n        <select value={curPath} onChange={(e) => { setCurPath(parseFloat(e.target.value)); }}>\n          {paths.map((path, i) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <option key={i} value={i}>{path.name}</option>\n          ))}\n        </select>\n        <br />\n        <input type=\"text\" value={formX} onChange={((e) => { setFormX(e.target.value); })} />\n        <br />\n        <input type=\"text\" value={formY} onChange={((e) => { setFormY(e.target.value); })} />\n        <br />\n        <button type=\"button\" onClick={() => addPoint(parseFloat(formX), parseFloat(formY))}>add</button>\n        <button type=\"button\" onClick={() => setEndpoint(parseFloat(formX), parseFloat(formY))}>end point</button>\n        <button type=\"button\" onClick={() => { delPoint(); }}>delete</button>\n        <br />\n        <textarea value={code} />\n      </div>\n\n      <Stage style={{ margin: '10px' }} width={1000} height={1000} scale={{ x: 100, y: 100 }} onClick={addPointEvent}>\n        <Net width={1} qty={10} />\n        <Layer>\n          {paths.map((path) => (\n            (path.endPoint !== undefined ? [...path.points, path.endPoint] : path.points)\n              .map((star, i) => (\n                <>\n                  <Circle\n                    key={i.toString()}\n                    id={i.toString()}\n                    x={star.x}\n                    y={star.y}\n                    radius={0.1}\n                    fill={path.color}\n                  />\n                  {i > 0 && (\n                    <Line\n                      points={[path.points[i - 1].x, path.points[i - 1].y, star.x, star.y]}\n                      strokeWidth={0.05}\n                      stroke={path.color}\n                    />\n                  )}\n                </>\n              ))\n          ))}\n        </Layer>\n      </Stage>\n    </>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}