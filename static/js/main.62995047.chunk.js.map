{"version":3,"sources":["Net.tsx","App.tsx","index.tsx"],"names":["Net","width","qty","linesA","linesB","i","push","strokeWidth","stroke","points","App","React","useState","name","color","paths","setPaths","curPath","setCurPath","formX","setFormX","formY","setFormY","code","setCode","height","setHeight","addPoint","x","y","Number","isNaN","cpaths","useEffect","map","path","coordsArray","undefined","endPoint","point","join","style","position","right","zIndex","value","onChange","e","parseFloat","target","type","onClick","setEndpoint","slice","length","delPoint","margin","scale","evt","layerX","layerY","star","id","toString","radius","fill","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.62995047.chunk.js","sourcesContent":["import React from 'react';\nimport { Layer, Line } from 'react-konva';\n\n// eslint-disable-next-line react/prop-types\nconst Net: React.FC<{ width: number; qty: number }> = ({ width, qty }) => {\n  const linesA = [];\n  const linesB = [];\n\n  // eslint-disable-next-line no-plusplus\n  for (let i = 0; i < qty / width; i++) {\n    linesA.push(\n      <Line\n        strokeWidth={0.01}\n        stroke=\"black\"\n        points={[i * width, 0, i * width, qty]}\n      />,\n    );\n\n    linesB.push(\n      <Line\n        strokeWidth={0.01}\n        stroke=\"black\"\n        points={[0, i * width, qty, i * width]}\n      />,\n    );\n  }\n\n  return (\n    <Layer>\n      {linesA}\n      {linesB}\n    </Layer>\n  );\n};\n\nexport default Net;\n","import React, { useEffect } from 'react';\nimport {\n  Stage, Layer, Line, Circle,\n} from 'react-konva';\nimport Konva from 'konva';\nimport Net from './Net';\n\nexport interface Point {\n  x: number,\n  y: number,\n}\n\nexport interface Path {\n  name: string,\n  color: string,\n  points: Point[],\n  endPoint?: Point\n}\n\nconst App = () => {\n  const [paths, setPaths] = React.useState<Path[]>([\n    { name: 'Дрон 1', color: '#000', points: [] },\n    { name: 'Дрон 2', color: '#F00', points: [] },\n    { name: 'Дрон 3', color: '#00F', points: [] },\n  ]);\n  const [curPath, setCurPath] = React.useState(0);\n  const [formX, setFormX] = React.useState('');\n  const [formY, setFormY] = React.useState('');\n  const [code, setCode] = React.useState('');\n  const [height, setHeight] = React.useState('');\n\n  const addPoint = (x: number, y: number) => {\n    if (!Number.isNaN(x) && !Number.isNaN(y)) {\n      const cpaths = [...paths];\n      cpaths[curPath] = { ...cpaths[curPath], points: [...cpaths[curPath].points, { x, y }] };\n\n      setPaths(cpaths);\n    }\n  };\n\n  const setEndpoint = (x: number, y: number) => {\n    if (!Number.isNaN(x) && !Number.isNaN(y)) {\n      const cpaths = [...paths];\n      cpaths[curPath] = { ...cpaths[curPath], endPoint: { x, y } };\n\n      setPaths(cpaths);\n    }\n  };\n\n  const addPointEvent = (e: Konva.KonvaEventObject<MouseEvent>) => {\n    // @ts-ignore\n    addPoint(e.evt.layerX / 100, e.evt.layerY / 100);\n  };\n\n  useEffect(() => {\n    // eslint-disable-next-line array-callback-return\n    setCode(paths.map((path) => {\n      // eslint-disable-next-line max-len\n      const coordsArray = (path.endPoint !== undefined ? [...path.points, path.endPoint] : path.points)\n        .map((point) => (\n          `{${point.x}, ${point.y}, ${height}}`\n        )).join(',\\n');\n\n      return `code\n${coordsArray}\ncodeend`;\n    }).join('\\n\\n\\n\\n'));\n  }, [height, paths]);\n\n  const delPoint = () => {\n    const cpaths = [...paths];\n    cpaths[curPath] = {\n      ...cpaths[curPath],\n      points: [...cpaths[curPath].points.slice(0, cpaths[curPath].points.length - 1)],\n    };\n\n    setPaths(cpaths);\n  };\n\n  return (\n    <>\n      <div style={{ position: 'absolute', right: 0, zIndex: 10000000 }}>\n        <select value={curPath} onChange={(e) => { setCurPath(parseFloat(e.target.value)); }}>\n          {paths.map((path, i) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <option key={i} value={i}>{path.name}</option>\n          ))}\n        </select>\n        <br />\n        <input type=\"text\" value={formX} onChange={((e) => { setFormX(e.target.value); })} />\n        <br />\n        <input type=\"text\" value={formY} onChange={((e) => { setFormY(e.target.value); })} />\n        <br />\n        <button type=\"button\" onClick={() => addPoint(parseFloat(formX), parseFloat(formY))}>add</button>\n        <button type=\"button\" onClick={() => setEndpoint(parseFloat(formX), parseFloat(formY))}>end point</button>\n        <button type=\"button\" onClick={() => { delPoint(); }}>delete</button>\n        <br />\n        <input type=\"text\" value={height} onChange={((e) => { setHeight(e.target.value); })} />\n        <br />\n        <textarea value={code} />\n      </div>\n\n      <Stage style={{ margin: '10px' }} width={1000} height={1000} scale={{ x: 100, y: 100 }} onClick={addPointEvent}>\n        <Net width={1} qty={10} />\n        <Layer>\n          {paths.map((path) => (\n            (path.endPoint !== undefined ? [...path.points, path.endPoint] : path.points)\n              .map((star, i) => (\n                <>\n                  <Circle\n                    key={i.toString()}\n                    id={i.toString()}\n                    x={star.x}\n                    y={star.y}\n                    radius={0.1}\n                    fill={path.color}\n                  />\n                  {i > 0 && (\n                    <Line\n                      points={[path.points[i - 1].x, path.points[i - 1].y, star.x, star.y]}\n                      strokeWidth={0.05}\n                      stroke={path.color}\n                    />\n                  )}\n                </>\n              ))\n          ))}\n        </Layer>\n      </Stage>\n    </>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}